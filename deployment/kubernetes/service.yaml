apiVersion: v1
kind: Service
metadata:
  name: queue-engine-service
  labels:
    app: queue-engine
  annotations:
    prometheus.io/scrape: "true"
    prometheus.io/path: "/api/v1/metrics"
    prometheus.io/port: "8000"
spec:
  selector:
    app: ray
    component: head
    cluster: queue-engine-cluster
  ports:
  - name: api
    port: 8000
    targetPort: 8000
  - name: ray-dashboard
    port: 8265
    targetPort: 8265
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: ray-head
  labels:
    app: ray
    component: head
    cluster: queue-engine-cluster
spec:
  selector:
    app: ray
    component: head
    cluster: queue-engine-cluster
  ports:
  - name: client
    port: 10001
    targetPort: 10001
  - name: redis
    port: 6379
    targetPort: 6379
  type: ClusterIP